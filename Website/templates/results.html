<!DOCTYPE HTML>
<!--
	Aesthetic by gettemplates.co
	Twitter: http://twitter.com/gettemplateco
	URL: http://gettemplates.co
-->
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>RecipeSearch - Results</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">


	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Kaushan+Script" rel="stylesheet">
	<link href="https://www.w3schools.com/w3css/4/w3.css" rel="stylesheet">
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-blue-grey.css">
	<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<!-- jQuery -->
	<script src="static/js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="static/js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="static/js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="static/js/jquery.waypoints.min.js"></script>
	<!-- Carousel -->
	<script src="static/js/owl.carousel.min.js"></script>
	<!-- countTo -->
	<script src="static/js/jquery.countTo.js"></script>

	<!-- Stellar Parallax -->
	<script src="static/js/jquery.stellar.min.js"></script>

	<!-- Magnific Popup -->
	<script src="static/js/jquery.magnific-popup.min.js"></script>
	<script src="static/js/magnific-popup-options.js"></script>

	<script src="static/js/moment.min.js"></script>
	<script src="static/js/bootstrap-datetimepicker.min.js"></script>
	<script src="static/js/main.js"></script>
	<!-- Animate.css -->
	<link rel="stylesheet" href="static/css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="static/css/icomoon.css">
	<!-- Themify Icons-->
	<link rel="stylesheet" href="static/css/themify-icons.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="static/css/bootstrap.css">

	<!-- Magnific Popup -->
	<link rel="stylesheet" href="static/css/magnific-popup.css">

	<!-- Bootstrap DateTimePicker -->
	<link rel="stylesheet" href="static/css/bootstrap-datetimepicker.min.css">



	<!-- Owl Carousel  -->
	<link rel="stylesheet" href="static/css/owl.carousel.min.css">
	<link rel="stylesheet" href="static/css/owl.theme.default.min.css">

	<!-- Theme style  -->
	<link rel="stylesheet" href="static/css/style.css">
	<link rel="stylesheet" href="static/css/home.css">
	<!-- Modernizr JS -->
	<script src="static/js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>
	<![endif]-->
	<style>
		#ingredientList::-webkit-scrollbar {
			width: 20px;
		}

		/* Track */

		#ingredientList::-webkit-scrollbar-track {
			box-shadow: inset 0 0 5px grey;
			border-radius: 10px;

		}

		/* Handle */

		#ingredientList::-webkit-scrollbar-thumb {
			background-color: #FBB448;
			border-radius: 10px;

		}

		/* Handle on hover */

		#ingredientList::-webkit-scrollbar-thumb:hover {
			background-color: #fcbe61;
			/*border-color: #fcbe61;*/
		}
	</style>

</head>

<body style= "background-image: url('static/Images/back.gif');">

	<div id="page" >

		<nav class="gtco-nav" role="navigation">
			<div class="gtco-container">

				<div class="row">
					<div class="col-sm-4 col-xs-12">
						<div id="gtco-logo">
							<a href="/">RecipeSearch <em>.</em> </a>
						</div>
					</div>
					<div class="col-xs-8 text-right menu-1">
						<ul>
              <li  class = "has-dropdown"> <a href="#">Testing</a>
                <ul class="dropdown">
                  <li><a href="/savedingredients">Saved ingredients</a></li>
                  <li><a href="/savedrecipes">Saved recipes</a></li>
                  <li><a href="/weeklyplanner">weekly planner</a></li>
                </ul>
              </li>
							<li class="btn-cta" id="index-login-but" data-toggle="modal" data-target="#userModal">
								<a href="#"> <span>Login</span> </a>
							</li>
						</ul>
					</div>
				</div>

			</div>
		</nav>

		<div class="gtco-section">


			<div class=" col-lg-4">


				<div class="row">
					<div id="gtco-header" class="gtco-cover gtco-cover-md" role="banner" data-stellar-background-ratio="0.5" style="background-color:transparent;">
						<div class="gtco-container" style="position:fixed;transform: translateY(-25%);">
							<div class="row">
								<div class="col-md-12 col-md-offset-0">

									<div class="row row-mt-15em">

										<div class="col-md-4 col-md-push-1 animate-box" style="width:30vw;" data-animate-effect="fadeInRight">
											<div class="w3-bar w3-black" style="opacity:0.7;border-radius: 15px 15px 0px 0px;">
												<button id="searchIngredient" class="w3-bar-item w3-button">
													<i class="fa fa-cutlery w3-margin-right"></i>Search by Ingredients</button>
												<button id="searchRecipe" class="w3-bar-item w3-button">
													<i class="fa fa-search w3-margin-right"></i>Search by Recipe Name</button>

											</div>
											<div class="form-wrap" style="border-radius: 0px 0px 15px 15px;">
												<div class="tab">

													<div class="tab-content" style="border-radius: 0px 0px 15px 15px;">
														<div id="allCollapse">
															<div id="RecipeCollapse" class="collapse multi-collapse">
																<div class="tab-content-inner active" data-content="search">
																	<div>
																		<h3 class="cursive-font">Search by Recipe Name</h3>
																	</div>
																	<form action="#">
																		<div class="row form-group">
																			<div class="col-md-12" id="recipe-search" class="collapse">
																				<input id="recipeInput" type="text" class="form-control" placeholder="e.g. Lasagna">
																			</div>
																		</div>
																	</form>
																	<div class="row form-group">
																		<div class="col-md-12">
																			<input id="recipeBut" type="submit" class="btn btn-primary btn-block" value="Search Again">
																		</div>
																	</div>
																</div>
															</div>

															<div id="IngredientCollapse" class="collapse multi-collapse">
																<div>
																	<h3 class="cursive-font">Search by Ingredient</h3>
																</div>
																<form action="#">
																	<div class="row form-group">
																		<div class="col-md-12" id="ingredient-search" class="collapse">

																			<div class="input-group">
																				<input id="input-box-home" type="text" class="form-control" placeholder="e.g. chicken, tomato, onion" style="height:45px">
																				<span class="input-group-btn">
																					<button style="height:45px" class="btn btn-primary btn-block" type="button" onclick="popList()">Add</button>
																				</span>
																			</div>
																			<nav style="padding-top:12px;">
																				<ul style="height:20vh" id="ingredientList">
																				</ul>
																			</nav>
																		</div>
																	</div>
																</form>
																<div class="row form-group">
																	<div class="col-md-12">
																		<input id="ingredientBut" type="submit" class="btn btn-primary btn-block" value="Search Again">
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>


							</div>
						</div>
					</div>



					<!--<div class="col-lg-4 col-md-4 col-sm-6">
							<a href="images/img_1.jpg" class="fh5co-card-item image-popup">
								<figure>
									<img src="images/img_1.jpg" alt="Image" class="img-responsive">
								</figure>
								<div class="fh5co-text">
									<h2>Fresh Mushrooms</h2>
									<p>Far far away, behind the word mountains, far from the countries Vokalia..</p>
									<p>
										<span class="price cursive-font">$19.15</span>
									</p>
								</div>
							</a>
						</div>-->

				</div>
			</div>

			<div class="col-lg-8" style="background-color: transparent">
				<div id="recipeList" class="main-container w3-container">

				</div>
			</div>

		</div>
		<footer id="gtco-footer" role="contentinfo" style="background-image: url('/static/images/img_bg_1.jpg');" data-stellar-background-ratio="0.5">
			<div class="overlay"></div>
			<div class="gtco-container">
				<div class="row row-pb-md">
					<div class="col-md-12 text-center copyright">
						<p>
							<small class="block">&copy; 2016 Free HTML5. All Rights Reserved.</small>
							<small class="block">Designed by jdquhjhflqefhnl
								<a href="http://gettemplates.co/" target="_blank">GetTemplates.co</a> Demo Images:
								<a href="http://unsplash.com/" target="_blank">Unsplash</a>
							</small>
						</p>
					</div>
				</div>
			</div>
		</footer>

		<!-- </div> -->
	</div>

  <div class="gototop js-top active">
    <a href="#" class="js-gotop"><i class="icon-arrow-up"></i></a>
  </div>

	<!-- jQuery -->
	<script src="static/js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="static/js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="static/js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="static/js/jquery.waypoints.min.js"></script>
	<!-- Carousel -->
	<script src="static/js/owl.carousel.min.js"></script>
	<!-- countTo -->
	<script src="static/js/jquery.countTo.js"></script>

	<!-- Stellar Parallax -->
	<script src="static/js/jquery.stellar.min.js"></script>

	<!-- Magnific Popup -->
	<script src="static/js/jquery.magnific-popup.min.js"></script>
	<script src="static/js/magnific-popup-options.js"></script>

	<script src="static/js/moment.min.js"></script>
	<script src="static/js/bootstrap-datetimepicker.min.js"></script>
	<script src="static/js/main.js"></script>

	<script>
		$("#recipeBut").click(() => {
			var recipeName = document.getElementById("recipeInput").value;
			if (recipeName == "") {
				alert("Please enter a recipe before searching.");
			} else {
				$.get("https://api.edamam.com/search?q=" + recipeName + "&to=100&app_id=32f99c15&app_key=0906e0d80327015301bfe1788e84293e",
					function (data, status) {
						localStorage.setItem("APIReturn", JSON.stringify(data));
						window.location.href = '/results';
					});
			}
		});

		$("#ingredientBut").click(() => {
			var recipeString = "";

			$("#ingredientList li").each(function (i, li) {
				var product = $(li).text();
				product = product.replace("\u00D7", "");
				recipeString = recipeString.concat(product, ',');
			});
			recipeString = recipeString.slice(0, recipeString.length - 1);

			//alert(recipeString);
			localStorage.setItem("ingredientList", recipeString);
			if (recipeString.length == 0) {
				alert("Please enter ingredients before searching.");
			} else {
				//alert("searching");
				$.get("https://api.edamam.com/search?q=" + recipeString + "&to=100&app_id=32f99c15&app_key=0906e0d80327015301bfe1788e84293e",
					function (data, status) {
						localStorage.setItem("APIReturn", JSON.stringify(data));
						window.location.href = '/results'
					});

			}
		});
		function popList() {
			var node = document.createElement("LI");

			//Adds value in text box
			if (document.getElementById('input-box-home').value === "") return;
			var textnode = document.createTextNode(document.getElementById('input-box-home').value);
			node.appendChild(textnode);

			document.getElementById("ingredientList").appendChild(node);
			var span = document.createElement("SPAN");
			var txt = document.createTextNode("\u00D7");
			span.className = "close";
			span.appendChild(txt);
			node.appendChild(span);
			node.onclick = function () {
				node.remove();
			}


			document.getElementById("input-box-home").value = "";
		}
		$(document).ready(function () {
			var searchType = localStorage.getItem("searchType");
			if (searchType == null || searchType == "recipe") {
				$("#RecipeCollapse").collapse("show");
				$("#IngredientCollapse").collapse("hide");
			} else {
				$("#IngredientCollapse").collapse("show");
				$("#RecipeCollapse").collapse("hide");
			}
			var object = localStorage.getItem("APIReturn");
			var recipeObject = JSON.parse(object);
			for (var i = 0; i < 100; i++) {
				//alert(recipeObject.hits[i].recipe.url);
				if (recipeObject.hits[i] != null) {
					//alert(recipeObject.hits[i].recipe.ingredients[0]);
					$('#recipeList').append('<div style="height:40vh;" class="col-lg-4 col-md-4 col-sm-6"> <a href="' + recipeObject.hits[i].recipe.image + '" class="fh5co-card-item image-popup"> <figure> <div class="overlay"> </div> <img style="width:100%;" src="' + recipeObject.hits[i].recipe.image + '" alt="Image" class="img-responsive"> </figure> <div class="fh5co-text"> <h2>' + recipeObject.hits[i].recipe.label + '</h2> </div> </a> </div>');


				}
			}
			//adds the ingredient list from the previous page to this page
			var list = localStorage.getItem("ingredientList");
			if (list != 'empty') {
				list = list.split(",");
				$.each(list, (i, ingredient) => {
					var node = document.createElement("LI");

					//Adds value in text box
					var textnode = document.createTextNode(ingredient);
					node.appendChild(textnode);
					document.getElementById("ingredientList").appendChild(node);

					var span = document.createElement("SPAN");
					var txt = document.createTextNode("\u00D7");
					span.className = "close";
					span.appendChild(txt);
					node.appendChild(span);

					$(node).addClass("non-Deleted");
					node.onclick = function () {
						node.remove();
					}
				});
				localStorage.setItem("ingredientList", 'empty');
			}
		});
		$('#searchIngredient').click(() => {
			$("#IngredientCollapse").collapse("show");
			$("#RecipeCollapse").collapse("hide");
		});

		$('#searchRecipe').click(() => {
			$("#RecipeCollapse").collapse("show");
			$("#IngredientCollapse").collapse("hide");
		});
		$('#ingredientBut').click(() => {
			localStorage.setItem("searchType", "ingredient");
		});

		$('#recipeBut').click(() => {
			localStorage.setItem("searchType", "recipe");
		});
	</script>
</body>
<div class= "modal fade" id = "userModal" tabindex= "-1" role= "dialog" aria-labelledby ="userModal" aria-hidden= "true" style="background-image: url('static/images/loginpanel.jpg');">
	<div class= "modal-dialog" role="document" style= "position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);">
		<div class= "modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="userModal" style="display:inline">Login</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<input type="text" class="form-control" placeholder="Username" id="usr">
				<input type="password" class="form-control" placeholder="Password" id="usr">
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary">Login</button>
				<button type="button" class="btn btn-primary">Register</button>
			</div>
		</div>
	</div>
</div>
</html>
